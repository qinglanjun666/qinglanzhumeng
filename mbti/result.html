<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MBTI 测试结果</title>
  <link rel="stylesheet" href="mbti.css">
  <style>
    :root{ --brand:#1E40FF; --text:#111827; --muted:#6b7280; --bg:#f7f8fb; }
    body{ background:var(--bg); color:var(--text); }
    .hero{ max-width:960px; margin:24px auto 0; padding:28px 24px; background:linear-gradient(135deg,#eef2ff,#f7f8ff); border:1px solid #e6eaff; border-radius:16px; }
    .hero .title{ display:flex; align-items:flex-end; gap:12px; }
    .hero .badge{ display:inline-block; padding:8px 12px; border-radius:10px; background:var(--brand); color:#fff; font-weight:800; }
    .hero .subtitle{ margin:8px 0 0; color:#3b4a8b; }
    .grid2{ max-width:1080px; margin:18px auto 0; display:grid; grid-template-columns:1.2fr .8fr; gap:18px; }
    @media (max-width: 960px){ .grid2{ grid-template-columns:1fr; } }
    .section{ background:#fff; border:1px solid #e9ecef; border-radius:14px; box-shadow:0 6px 18px rgba(0,0,0,.05); padding:18px; }
    .section h2{ margin:0 0 8px; font-size:20px; }
    .section h3{ margin:16px 0 6px; font-size:16px; color:#374151; }
    .section p{ color:#334e68; }
    .section ul{ margin:0; padding-left:20px; }
    .sidebar-card{ background:#fff; border:1px solid #e9ecef; border-radius:14px; box-shadow:0 6px 18px rgba(0,0,0,.05); padding:18px; }
    .chips{ margin:8px 0 0; }
    .chip{ display:inline-block; padding:6px 10px; margin:0 8px 8px 0; background:#f5f7ff; border:1px solid #e3e8ff; border-radius:999px; font-size:13px; color:#3b4a8b; }
    .bars{ display:grid; grid-template-columns:1fr; gap:12px; margin-top:8px; }
    .note{ font-size:12px; color:#6b7280; margin-top:14px; }
  </style>
</head>
<body>
  <div id="top-nav"></div>
  <div class="mbti-wrap" style="padding:24px">
    <div class="hero">
      <div class="title"><span id="badge" class="badge">TYPE</span><h1 id="typeText" class="question-title" style="font-size:40px;margin:0"></h1></div>
      <div id="typeName" class="subtitle"></div>
    </div>
    <div class="grid2">
      <div>
        <section class="section">
          <h2>类型解读</h2>
          <div id="overview"></div>
          <h3>优势</h3>
          <ul id="strengths"></ul>
          <h3>可能的盲点</h3>
          <ul id="pitfalls"></ul>
          <h3>工作风格</h3>
          <ul id="work"></ul>
          <h3>沟通偏好</h3>
          <ul id="communication"></ul>
          <h3>学习建议</h3>
          <ul id="learning"></ul>
          <h3>适合领域</h3>
          <ul id="careers"></ul>
          <div class="note">说明：以上描述基于人格偏好维度进行概括，用于自我了解与沟通参考，不用于任何诊断或选拔性结论。</div>
        </section>
      </div>
      <aside>
        <div class="sidebar-card">
          <div style="font-weight:700;">核心特质</div>
          <div id="traits" class="chips"></div>
        </div>
        <div class="sidebar-card" style="margin-top:12px;">
          <div style="font-weight:700;">四维偏好</div>
          <div id="bars" class="bars"></div>
          <div style="margin-top:12px;">
            <a href="index.html" class="btn outline">重新测试</a>
          </div>
        </div>
      </aside>
    </div>
  </div>
  <script>
    const mapName = {
      INFP: '调停者', INFJ:'提倡者', ENFP:'竞选者', ENFJ:'主人公',
      INTP:'逻辑学家', INTJ:'建筑师', ENTP:'辩论家', ENTJ:'指挥官',
      ISFP:'探险家', ISFJ:'守护者', ESFP:'表演者', ESFJ:'执政官',
      ISTP:'鉴赏家', ISTJ:'物流师', ESTP:'企业家', ESTJ:'总经理'
    };
    function getQuery(k){const u=new URL(location.href);return u.searchParams.get(k)||'';}
    function bar(label,left,right){
      const w = 50;
      const el = document.createElement('div');
      el.innerHTML = '<div style="display:flex;justify-content:space-between;margin-bottom:4px;color:#4b5b83"><span>'+left+'</span><span>'+right+'</span></div><div style="height:10px;background:#eee;border-radius:6px;overflow:hidden"><div style="width:'+w+'%;height:100%;background:#6C9BF3"></div></div>';
      const wrap = document.createElement('div');
      wrap.appendChild(el);
      return wrap;
    }
    function chip(text){ const s=document.createElement('span'); s.className='chip'; s.textContent=text; return s; }
    document.addEventListener('DOMContentLoaded',()=>{
      const BASE = location.pathname.includes('huilanweb') ? '/huilanweb' : '';
      const type = (getQuery('type')||'').toUpperCase();
      document.getElementById('typeText').textContent = type || 'UNKNOWN';
      document.getElementById('badge').textContent = type || 'TYPE';
      document.getElementById('typeName').textContent = mapName[type] || '你的类型';
      const bars = document.getElementById('bars');
      bars.appendChild(bar('EI','内向 (I)','外向 (E)'));
      bars.appendChild(bar('SN','直觉 (N)','感觉 (S)'));
      bars.appendChild(bar('TF','情感 (F)','思维 (T)'));
      bars.appendChild(bar('JP','知觉 (P)','判断 (J)'));

      fetch(BASE + '/data/mbti_details.json').then(r=>r.json()).then(all=>{
        if(!type || !all[type]) return;
        const d = all[type];
        document.getElementById('typeName').textContent = (d.alias||mapName[type]||type);
        const setList = (id, arr)=>{ const ul=document.getElementById(id); ul.innerHTML=''; (arr||[]).forEach(t=>{ const li=document.createElement('li'); li.textContent=t; ul.appendChild(li); }); };
        const ov = document.getElementById('overview');
        ov.innerHTML = '';
        if(d.overview){ const p=document.createElement('p'); p.textContent=d.overview; ov.appendChild(p); }
        setList('strengths', d.strengths||[]);
        setList('pitfalls', d.pitfalls||[]);
        setList('work', d.work||[]);
        setList('communication', d.communication||[]);
        setList('learning', d.learning||[]);
        setList('careers', d.careers||[]);
        const traits = document.getElementById('traits'); traits.innerHTML=''; (d.traits||[]).forEach(t=>traits.appendChild(chip(t)));
      }).catch(()=>{});
    });
  </script>
  <div id="site-footer"></div>
  <script src="../top-nav.js"></script>
  <script src="../site-footer.js"></script>
</body>
</html>